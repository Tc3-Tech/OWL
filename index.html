<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Rivian Technician Portal</title>
  
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  
  <!-- React and ReactDOM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  
  <!-- Babel for JSX support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.7/babel.min.js"></script>
  
  <!-- Additional styles -->
  <style>
    html, body, #root {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    
    * {
      box-sizing: border-box;
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      width: 200px;
      background-color: #555;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -100px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .tooltip .tooltip-text::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #555 transparent transparent transparent;
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    
    .fade-in {
      animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <!-- Your React component -->
  <script type="text/babel">
    const TechnicianPortal = () => {
      // State hooks for interactivity
      const [activeTab, setActiveTab] = React.useState("resources");
      const [selectedCategory, setSelectedCategory] = React.useState("Repair Procedures");
      const [showSuccessMessage, setShowSuccessMessage] = React.useState(false);
      const [expandedNode, setExpandedNode] = React.useState(null);
      
      // Sample data for demonstration
      const workOrderData = {
        orderNumber: "WO-27491",
        vehicle: "R1T",
        vin: "7FTTW1CV3NLB51289",
        reportedIssue: "Vehicle experiencing loss of power during acceleration",
        diagnosedProblem: "Drive Unit Replacement Required",
        technicianAssigned: "Alex Rodriguez"
      };
      
      // Handle tab click
      const handleTabClick = (tab) => {
        setActiveTab(tab);
      };
      
      // Handle category selection
      const handleCategoryClick = (category) => {
        setSelectedCategory(category);
      };
      
      // Handle apply to documentation
      const handleApplyToDocumentation = () => {
        setShowSuccessMessage(true);
        setTimeout(() => {
          setShowSuccessMessage(false);
        }, 3000);
      };
      
      // Handle node click
      const handleNodeClick = (nodeId) => {
        if (expandedNode === nodeId) {
          setExpandedNode(null);
        } else {
          setExpandedNode(nodeId);
        }
      };
      
      // Resource categories data
      const categories = [
        "Repair Procedures",
        "Service Procedures (RiDE)",
        "Wiring Design Portal",
        "QUEST Nodes",
        "Theory of Operations",
        "Parts Information",
        "Tool Requirements"
      ];
      
      // Documentation tab content
      const DocumentationContent = () => (
        <div className="bg-white p-4 rounded shadow-md">
          <h2 className="text-xl font-bold border-b pb-2 mb-4">Work Order Documentation</h2>
          
          <div className="space-y-4">
            <div>
              <h3 className="font-bold text-lg">Vehicle Information</h3>
              <div className="grid grid-cols-2 gap-4 mt-2">
                <div className="p-2 border rounded bg-gray-50">
                  <p className="text-sm font-semibold">Vehicle</p>
                  <p className="text-sm">{workOrderData.vehicle}</p>
                </div>
                <div className="p-2 border rounded bg-gray-50">
                  <p className="text-sm font-semibold">VIN</p>
                  <p className="text-sm">{workOrderData.vin}</p>
                </div>
                <div className="p-2 border rounded bg-gray-50">
                  <p className="text-sm font-semibold">Mileage</p>
                  <p className="text-sm">4,872 mi</p>
                </div>
                <div className="p-2 border rounded bg-gray-50">
                  <p className="text-sm font-semibold">Build Date</p>
                  <p className="text-sm">11/2024</p>
                </div>
              </div>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">Customer Information</h3>
              <div className="p-3 border rounded mt-2">
                <p className="text-sm"><span className="font-semibold">Customer Name:</span> John Doe</p>
                <p className="text-sm"><span className="font-semibold">Contact:</span> (555) 123-4567</p>
                <p className="text-sm"><span className="font-semibold">Notes:</span> Customer reported issue only occurs during hard acceleration</p>
              </div>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">Technician Notes</h3>
              <textarea className="w-full p-2 border rounded mt-2 h-32" placeholder="Enter your repair notes here..."></textarea>
              <div className="flex justify-end mt-2">
                <button className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">Save Notes</button>
              </div>
            </div>
          </div>
        </div>
      );
      
      // Notes tab content
      const NotesContent = () => (
        <div className="bg-white p-4 rounded shadow-md">
          <h2 className="text-xl font-bold border-b pb-2 mb-4">Technical Notes</h2>
          
          <div className="space-y-4">
            <div>
              <h3 className="font-bold text-lg">Service Bulletin Updates</h3>
              <div className="mt-2 border rounded p-3 bg-blue-50">
                <p className="text-sm font-semibold text-blue-800">SB-2025-042: Drive Unit High Voltage Connector Torque Update (May 1, 2025)</p>
                <p className="text-sm mt-1">Updated torque specifications for high voltage connectors on Drive Units manufactured before March 2025. Apply 8.5 Nm of torque to primary drive unit connectors.</p>
              </div>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">Personal Notes</h3>
              <div className="grid grid-cols-1 gap-2 mt-2">
                <div className="border p-2 rounded bg-yellow-50">
                  <p className="text-sm font-semibold">Note from April 15, 2025</p>
                  <p className="text-sm text-gray-700">Remember to check the coolant level before operating the vehicle after drive unit replacement. New units come dry.</p>
                </div>
                <div className="border p-2 rounded bg-yellow-50">
                  <p className="text-sm font-semibold">Note from March 22, 2025</p>
                  <p className="text-sm text-gray-700">High voltage connector pin 4 sometimes shows high resistance. Clean thoroughly before connection.</p>
                </div>
              </div>
              <div className="mt-2">
                <input type="text" className="w-full p-2 border rounded" placeholder="Add a new note..."/>
                <div className="flex justify-end mt-2">
                  <button className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">Add Note</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
      
      // Resources tab content - Drive Unit Replacement Procedure
      const ResourcesContent = () => (
        <div className="bg-white p-4 rounded shadow-md">
          <h2 className="text-xl font-bold border-b pb-2 mb-4">Drive Unit Replacement Procedure</h2>
          
          <div className="flex justify-between mb-4">
            <span className="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">Estimated Time: 4.5 hours</span>
            <span className="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">Parts In Stock</span>
          </div>
          
          <div className="space-y-4">
            <div>
              <h3 className="font-bold text-lg">Required Resources:</h3>
              <div className="grid grid-cols-2 gap-2 mt-2">
                <a href="#" onClick={(e) => { e.preventDefault(); alert("Opening Complete Procedure Document"); }} className="flex items-center p-2 border rounded hover:bg-blue-50">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                  Complete Procedure Document
                </a>
                <a href="#" onClick={(e) => { e.preventDefault(); alert("Opening RiDE Diagnostics"); }} className="flex items-center p-2 border rounded hover:bg-blue-50">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                  RiDE Diagnostics
                </a>
                <a href="#" onClick={(e) => { e.preventDefault(); alert("Opening Wiring Diagrams"); }} className="flex items-center p-2 border rounded hover:bg-blue-50">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path></svg>
                  Wiring Diagrams
                </a>
                <a href="#" onClick={(e) => { e.preventDefault(); alert("Opening Parts Catalog"); }} className="flex items-center p-2 border rounded hover:bg-blue-50">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                  Parts Catalog
                </a>
              </div>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">QUEST Node History:</h3>
              <div className="mt-2 border rounded p-3 bg-gray-50">
                <p className="text-sm"><span className="font-semibold">3 relevant QUEST nodes found</span> for Drive Unit Replacement on R1T</p>
                <ul className="mt-2 space-y-1">
                  <li 
                    className="text-sm text-blue-600 hover:underline cursor-pointer" 
                    onClick={() => handleNodeClick("QUEST-2189")}
                  >
                    • QUEST-2189: Drive Unit Noise Investigation (April 2025)
                    {expandedNode === "QUEST-2189" && (
                      <div className="mt-2 p-2 bg-blue-50 rounded text-gray-800 fade-in">
                        <p className="text-xs">Investigation found that Drive Units built before March 2025 may exhibit noise during acceleration due to internal gear mesh tolerance. Replacement is recommended if noise is accompanied by power loss.</p>
                      </div>
                    )}
                  </li>
                  <li 
                    className="text-sm text-blue-600 hover:underline cursor-pointer" 
                    onClick={() => handleNodeClick("QUEST-1854")}
                  >
                    • QUEST-1854: Drive Unit Replacement After Water Exposure (Feb 2025)
                    {expandedNode === "QUEST-1854" && (
                      <div className="mt-2 p-2 bg-blue-50 rounded text-gray-800 fade-in">
                        <p className="text-xs">Drive units exposed to deep water may show delayed failure symptoms. Always check event logs for water detection warnings and inspect HV connector seals.</p>
                      </div>
                    )}
                  </li>
                  <li 
                    className="text-sm text-blue-600 hover:underline cursor-pointer" 
                    onClick={() => handleNodeClick("QUEST-1677")}
                  >
                    • QUEST-1677: Drive Unit Connector Failure Analysis (Jan 2025)
                    {expandedNode === "QUEST-1677" && (
                      <div className="mt-2 p-2 bg-blue-50 rounded text-gray-800 fade-in">
                        <p className="text-xs">High voltage connectors may show intermittent connection causing power loss. Updated connector design implemented in service kits after January 2025.</p>
                      </div>
                    )}
                  </li>
                </ul>
              </div>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">Parts Required:</h3>
              <table className="min-w-full mt-2 border">
                <thead>
                  <tr className="bg-gray-100">
                    <th className="p-2 text-left text-sm">Part Number</th>
                    <th className="p-2 text-left text-sm">Description</th>
                    <th className="p-2 text-left text-sm">Quantity</th>
                    <th className="p-2 text-left text-sm">Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr className="border-t">
                    <td className="p-2 text-sm">RVN-DU-2572-A</td>
                    <td className="p-2 text-sm">Drive Unit Assembly - R1T</td>
                    <td className="p-2 text-sm">1</td>
                    <td className="p-2 text-sm"><span className="bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs">In Stock</span></td>
                  </tr>
                  <tr className="border-t">
                    <td className="p-2 text-sm">RVN-MT-0582-B</td>
                    <td className="p-2 text-sm">Mounting Hardware Kit</td>
                    <td className="p-2 text-sm">1</td>
                    <td className="p-2 text-sm"><span className="bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs">In Stock</span></td>
                  </tr>
                  <tr className="border-t">
                    <td className="p-2 text-sm">RVN-CN-1024-A</td>
                    <td className="p-2 text-sm">High Voltage Connector Set</td>
                    <td className="p-2 text-sm">1</td>
                    <td className="p-2 text-sm"><span className="bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs">In Stock</span></td>
                  </tr>
                  <tr className="border-t">
                    <td className="p-2 text-sm">RVN-CL-0472-A</td>
                    <td className="p-2 text-sm">Coolant - EV Grade (1L)</td>
                    <td className="p-2 text-sm">4</td>
                    <td className="p-2 text-sm"><span className="bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs">In Stock</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div>
              <h3 className="font-bold text-lg">Special Tools Required:</h3>
              <div className="grid grid-cols-2 gap-2 mt-2">
                <div className="border p-2 rounded bg-gray-50 tooltip">
                  <p className="text-sm font-semibold">RVN-TOOL-DU-LIFT</p>
                  <p className="text-xs text-gray-600">Drive Unit Lifting Fixture</p>
                  <p className="text-xs mt-1"><span className="text-green-600">✓</span> Available in Bay 3</p>
                  <span className="tooltip-text">Required for safe removal and installation of the drive unit. Rated for 250kg capacity.</span>
                </div>
                <div className="border p-2 rounded bg-gray-50 tooltip">
                  <p className="text-sm font-semibold">RVN-TOOL-HV-KIT</p>
                  <p className="text-xs text-gray-600">High Voltage Safety Kit</p>
                  <p className="text-xs mt-1"><span className="text-green-600">✓</span> Available in Main Tool Crib</p>
                  <span className="tooltip-text">Contains insulated gloves, HV testing equipment, and safety lockout tools.</span>
                </div>
              </div>
            </div>
            
            <div className="border-t pt-4 mt-4">
              <h3 className="font-bold text-lg">Documentation Auto-Fill:</h3>
              <div className="bg-yellow-50 p-3 rounded border border-yellow-200 mt-2">
                <p className="text-sm"><span className="font-semibold">Suggested Cause:</span> Drive unit internal fault causing power loss during acceleration</p>
                <p className="text-sm mt-2"><span className="font-semibold">Suggested Correction:</span> Replaced drive unit assembly and performed calibration via RiDE tool. Verified proper operation through test drive.</p>
                <button 
                  onClick={handleApplyToDocumentation} 
                  className="mt-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"
                >
                  Apply to Documentation
                </button>
                {showSuccessMessage && (
                  <div className="mt-2 p-2 bg-green-100 text-green-800 rounded fade-in">
                    Applied to documentation successfully!
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      );
      
      return (
        <div className="flex flex-col h-screen bg-gray-100">
          {/* Header with Rivian branding */}
          <header className="bg-blue-900 text-white p-4">
            <div className="flex justify-between items-center">
              <div className="flex items-center space-x-2">
                <div className="font-bold text-xl">Rivian</div>
                <div className="text-sm">Tech Resource Assistant</div>
              </div>
              <div className="text-sm">
                Technician: {workOrderData.technicianAssigned} | {new Date().toLocaleDateString()}
              </div>
            </div>
          </header>
          
          {/* Work Order Info Banner */}
          <div className="bg-white p-4 shadow-md">
            <div className="flex justify-between">
              <div>
                <h1 className="text-xl font-bold">Work Order: {workOrderData.orderNumber}</h1>
                <p className="text-sm text-gray-600">
                  {workOrderData.vehicle} | VIN: {workOrderData.vin}
                </p>
              </div>
              <div className="bg-yellow-100 p-2 rounded">
                <p className="font-semibold">Diagnosed Issue:</p>
                <p className="text-red-600 font-bold">{workOrderData.diagnosedProblem}</p>
              </div>
            </div>
            <p className="mt-2"><span className="font-semibold">Reported Issue:</span> {workOrderData.reportedIssue}</p>
          </div>
          
          {/* Navigation Tabs */}
          <div className="flex bg-gray-200 border-b border-gray-300">
            <div 
              className={`px-4 py-2 font-semibold cursor-pointer ${activeTab === "resources" ? "bg-white border-t-2 border-blue-600" : "text-gray-600 hover:bg-gray-300"}`}
              onClick={() => handleTabClick("resources")}
            >
              Resources
            </div>
            <div 
              className={`px-4 py-2 font-semibold cursor-pointer ${activeTab === "documentation" ? "bg-white border-t-2 border-blue-600" : "text-gray-600 hover:bg-gray-300"}`}
              onClick={() => handleTabClick("documentation")}
            >
              Documentation
            </div>
            <div 
              className={`px-4 py-2 font-semibold cursor-pointer ${activeTab === "notes" ? "bg-white border-t-2 border-blue-600" : "text-gray-600 hover:bg-gray-300"}`}
              onClick={() => handleTabClick("notes")}
            >
              Notes
            </div>
          </div>
          
          {/* Main Content Area */}
          <div className="flex flex-1 overflow-hidden">
            {/* Left Sidebar - Resource Categories */}
            <div className="w-64 bg-gray-800 text-white p-2 overflow-y-auto">
              <h2 className="text-lg font-semibold mb-2 px-2">Resource Categories</h2>
              <ul>
                {categories.map(category => (
                  <li 
                    key={category}
                    className={`mb-1 rounded p-2 cursor-pointer ${selectedCategory === category ? 'bg-blue-700 font-semibold' : 'hover:bg-gray-700'}`}
                    onClick={() => handleCategoryClick(category)}
                  >
                    {category}
                  </li>
                ))}
              </ul>
              
              <div className="mt-6 px-2">
                <h3 className="text-sm font-semibold mb-2">Related Repairs</h3>
                <ul className="text-sm">
                  <li className="mb-1 text-blue-300 hover:underline cursor-pointer" onClick={() => alert("Opening Battery Disconnection Procedure")}>Battery Disconnection Procedure</li>
                  <li className="mb-1 text-blue-300 hover:underline cursor-pointer" onClick={() => alert("Opening Drivetrain Alignment Check")}>Drivetrain Alignment Check</li>
                  <li className="mb-1 text-blue-300 hover:underline cursor-pointer" onClick={() => alert("Opening Torque Specifications")}>Torque Specifications</li>
                </ul>
              </div>
            </div>
            
            {/* Main Content - Resource Viewer */}
            <div className="flex-1 p-4 overflow-y-auto">
              {activeTab === "resources" && <ResourcesContent />}
              {activeTab === "documentation" && <DocumentationContent />}
              {activeTab === "notes" && <NotesContent />}
            </div>
          </div>
        </div>
      );
    };

    // Render the component
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TechnicianPortal />);
  </script>
</body>
</html>